barrier barrier_2 2;

class Barriers {

    static barrier_2 grant_excl_0__client0_receive;
    static barrier_2 grant_excl_0__client0_send;
    static barrier_2 grant_share_0__client0_receive;
    static barrier_2 grant_share_0__client0_send;
    static barrier_2 invalidate_0__client0_receive;
    static barrier_2 invalidate_0__client0_send;

    static void init()
    {
        grant_excl_0__client0_receive = new barrier_2;
        grant_excl_0__client0_send = new barrier_2;
        grant_share_0__client0_receive = new barrier_2;
        grant_share_0__client0_send = new barrier_2;
        invalidate_0__client0_receive = new barrier_2;
        invalidate_0__client0_send = new barrier_2;
    }

};
class _grant_then_invalidate {


    void run()
    {
        _grant_then_invalidate__gti_0:
    {
        select  end {
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_0", "grant_excl_0__client0_send", "_grant_then_invalidate__gti_1e");
		assert (false);
                goto _grant_then_invalidate__gti_1e;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_0", "grant_share_0__client0_send", "_grant_then_invalidate__gti_1s");
                goto _grant_then_invalidate__gti_1s;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_0", "invalidate_0__client0_send", "_grant_then_invalidate__Weakened_invalidate_0__client0_send");
                goto _grant_then_invalidate__Weakened_invalidate_0__client0_send;
            }
        }
    }
        _grant_then_invalidate__gti_1e:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_1e", "grant_excl_0__client0_receive", "_grant_then_invalidate__gti_2");
                goto _grant_then_invalidate__gti_2;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_1e", "invalidate_0__client0_send", "_grant_then_invalidate__Weakened_invalidate_0__client0_send");
                goto _grant_then_invalidate__Weakened_invalidate_0__client0_send;
            }
        }
    }
        _grant_then_invalidate__gti_1s:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_1s", "grant_share_0__client0_receive", "_grant_then_invalidate__gti_2");
                goto _grant_then_invalidate__gti_2;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_1s", "invalidate_0__client0_send", "_grant_then_invalidate__Weakened_invalidate_0__client0_send");
                goto _grant_then_invalidate__Weakened_invalidate_0__client0_send;
            }
        }
    }
        _grant_then_invalidate__gti_2:
    {
        /*skip*/;
        select  end {
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_2", "invalidate_0__client0_send", "_grant_then_invalidate__gti_3");
                goto _grant_then_invalidate__gti_3;
            }
        }
    }
        _grant_then_invalidate__gti_3:
    {
        /*skip*/;
        select  end {
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_3", "invalidate_0__client0_receive", "_grant_then_invalidate__gti_0");
                goto _grant_then_invalidate__gti_0;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_grant_then_invalidate", "_grant_then_invalidate__gti_3", "invalidate_0__client0_send", "_grant_then_invalidate__Weakened_invalidate_0__client0_send");
                goto _grant_then_invalidate__Weakened_invalidate_0__client0_send;
            }
        }
    }
        _grant_then_invalidate__Weakened_invalidate_0__client0_send:
    {
        /*skip*/;
        select  end {
            wait( true) -> 
                goto _grant_then_invalidate_final;
        }
    }
        _grant_then_invalidate_final:
        /*skip*/;
    }

};
class _monitor_grant_then_invalidate {


    void run()
    {
        _monitor_grant_then_invalidate__gti_0:
    {
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "grant_excl_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "grant_excl_0__client0_send", "_monitor_grant_then_invalidate__gti_1e");
                goto _monitor_grant_then_invalidate__gti_1e;
            }
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "grant_share_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "grant_share_0__client0_send", "_monitor_grant_then_invalidate__gti_1s");
                goto _monitor_grant_then_invalidate__gti_1s;
            }
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "invalidate_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_0", "invalidate_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
        }
    }
        _monitor_grant_then_invalidate__ERROR:
        assert(false);
        _monitor_grant_then_invalidate__gti_1e:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "grant_excl_0__client0_receive", "_monitor_grant_then_invalidate__gti_2");
                goto _monitor_grant_then_invalidate__gti_2;
            }
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "grant_excl_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "grant_share_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "grant_share_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "invalidate_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1e", "invalidate_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
        }
    }
        _monitor_grant_then_invalidate__gti_1s:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "grant_excl_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "grant_excl_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "grant_share_0__client0_receive", "_monitor_grant_then_invalidate__gti_2");
                goto _monitor_grant_then_invalidate__gti_2;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "grant_share_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "invalidate_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_1s", "invalidate_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
        }
    }
        _monitor_grant_then_invalidate__gti_2:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "grant_excl_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "grant_excl_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "grant_share_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "grant_share_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "invalidate_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_2", "invalidate_0__client0_send", "_monitor_grant_then_invalidate__gti_3");
                goto _monitor_grant_then_invalidate__gti_3;
            }
        }
    }
        _monitor_grant_then_invalidate__gti_3:
    {
        /*skip*/;
        select  end {
            sync( Barriers.grant_excl_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "grant_excl_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_excl_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "grant_excl_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "grant_share_0__client0_receive", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.grant_share_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "grant_share_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
            sync( Barriers.invalidate_0__client0_receive) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "invalidate_0__client0_receive", "_monitor_grant_then_invalidate__gti_0");
                goto _monitor_grant_then_invalidate__gti_0;
            }
            sync( Barriers.invalidate_0__client0_send) -> 
            {
                trace("{0}: {1} - {2} -> {3}", "_monitor_grant_then_invalidate", "_monitor_grant_then_invalidate__gti_3", "invalidate_0__client0_send", "_monitor_grant_then_invalidate__ERROR");
                goto _monitor_grant_then_invalidate__ERROR;
            }
        }
    }
    }

};
class Main {

    static _grant_then_invalidate _grant_then_invalidate;
    static _monitor_grant_then_invalidate _monitor_grant_then_invalidate;

    activate static void init()
    {
        Barriers.init();
        _grant_then_invalidate = new _grant_then_invalidate;
        async _grant_then_invalidate.run();
        _monitor_grant_then_invalidate = new _monitor_grant_then_invalidate;
        async _monitor_grant_then_invalidate.run();
    }

};
